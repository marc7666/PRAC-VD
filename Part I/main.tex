\documentclass[a4paper,12pt]{report}
\usepackage[catalan]{varioref}
\usepackage{setspace}
\input{sections/packages}
\input{sections/frontPage}
\onehalfspacing

\begin{document}
\thispagestyle{empty}
	\begin{titlepage}
		\maketitle
		\thispagestyle{empty}
	\end{titlepage}
	\cleardoublepage
	\newpage

\thispagestyle{empty}
\tableofcontents
\thispagestyle{empty}
\newpage
\thispagestyle{empty}
\listoftables
\thispagestyle{empty}
\newpage
\pagenumbering{arabic}
\section*{Justificació de l'elecció del dataset}
\addcontentsline{toc}{section}{Justificació de l'elecció del dataset}
Per conviccions personals, la temàtica de les dades a estudiar podia ser o bé contaminació atmosfèrica o bé, fe i religió.\\
En un primer moment, la intenció era buscar un conjunt de dades sobre la temàtica de fe i religió, per la qual cosa s'ha recorregut a fonts de dades com Kaggle, l'INE, l'IDESCAT, datos.gob.es o dades obertes de la Generalitat de Catalunya. Després d'investigar tots aquests repositoris de dades, s'ha descartat aquesta temàtica perquè les dades trobades no eren adients ja fos per la seva pobresa en nombre de variables (columnes del \textit{dataset}), per la seva pobresa en nombre de lectures (registres/files del conjunt), per la ubicació geogràfica en la qual han estat recollides les dades (la majoria als Estats Units d'Amèrica) o bé perquè no eren capaces de respondre a les preguntes que es tenien al cap.\\
Un cop descartada la temàtica espiritual i religiosa, s'ha cercat un altre tema d'interès. Un altre tema d'interès personal, és la contaminació atmosfèrica. Aquest tema té una gran rellevància a escala personal, pel fet de patir una afecció respiratòria com és l'asma. A més, el tema de la contaminació atmosfèrica també provoca una gran preocupació a nivell personal com a amant de la natura. Tenint en compte la preocupació i que l'afecció asmàtica és manifesta més sovint quan hi ha més contaminació a l'aire, s'ha començat a cercar dades sobre la contaminació atmosfèrica en el repositori de dades del govern d'Espanya, fins que s'ha trobat el conjunt de dades \textit{Calidad del aire en los puntos de medida automáticos de Vigilancia y Previsión de la Contaminación Atmosférica} \hyperref[ref:dades_gob_esp]{[Ref.1]}. En aquest web s'hi pot trobar l'enllaç que condueix al conjunt de dades en el repositori de dades obertes de la Generalitat de Catalunya \hyperref[ref:dades_cat]{[Ref.2]}. En aquest portal de dades català, s'hi pot trobar informació sobre el conjunt de dades: l'última data d'actualització de les dades, l'organisme distribuïdor de les dades, una petita descripció del \textit{dataset}, la llicència de publicació, el nombre de files i de columnes del conjunt de dades, una descripció de les columnes així com el seu tipus, etc.\\
Informació bàsica del dataset:
\begin{itemize}
    \item Nombre de files: 3,5 milions $\rightarrow$ Per evitar tractar amb tantes dades s'aplicarà un filtre per no tractar dades més enrere del 2015.
    \item Nombre de columnes: 40
    \item Data de creació de les dades: 18 de març de 2020
    \item Darrera actualització de les dades: 17 de novembre de 2025
\end{itemize}
És important de cara als aspectes legals destacar que aquest conjunt de dades distribuït pel Departament de Territori, Habitatge i Transició Ecològica de la Generalitat de Catalunya es publica sota la llicència oberta d'ús d'informació - Catalunya.
\section*{Rellevància del conjunt de dades}
\addcontentsline{toc}{section}{Rellevància del conjunt de dades}
Les dades escollides per dur a terme la pràctica final de l'assignatura, són dades compreses entre l'1 de gener del 1991 fins al 17 de novembre de 2025 i contenen un total de 40 columnes i 3.502.657 de registres. Per evitar tractar amb dades excessivament antigues, s'aplicarà un filtre al conjunt de dades per no tractar amb dades més enrere de l'any 2015.\\
Com s'ha esmentat anteriorment, el tema tractat per aquest conjunt de dades, és la contaminació atmosfèrica en el territòri de Catalunya, un fenomen molt important per a la ciutadania catalana, ja que una mala qualitat de l'aire pot derivar en malaties i fins i tot la mort.\\
En aquest context, la perspectiva de gènere no és aplicable.
\section*{Complexitat del dataset}
\addcontentsline{toc}{section}{Complexitat del dataset}
Mètriques del conjunt de dades original:
\begin{itemize}
    \item Nombre de files: 3.502.657
    \item Nombre de columnes: 40
    \item Data de creació de les dades: 18 de març de 2020
    \item Darrera actualització de les dades: 17 de novembre de 2025
    \item Registre més antic: 1 de gener de 1991
    \item Registre més recent: 17 de novembre de 2025
    \item Contaminants mesurats: $SO_{2}$, $NO_{2}$, $O_{3}$, $NO_{x}$, $PM_{10}$, NO, $H_{2}S$, CO, $PM_{2.5}$, Hg, $Cl_{2}$, $C_{6}H_{6}$, $PM_{1}$, PS, HCT, HCNM, HCl.
    \item Unitats de mesura: $\mu g/m^{3}$, $mg/m^{3}$, $ng/m^{3}$, ppm.
\end{itemize}
Mètriques del dataset un cop realitzades tasques de neteja de dades i filtratge:
\begin{itemize}
    \item Nombre de files: 1.402.163
    \item Nombre de columnes: 40 (Les mateixes)
    \item Registre més antic: 1 de gener de 2015
    \item Registre més recent: 17 de novembre de 2025
    \item Contaminants mesurats: $NO_{2}$, $O_{3}$, $NO_{x}$, $PM_{10}$, NO, $H_{2}S$, CO, $PM_{2.5}$, Hg, $Cl_{2}$, $C_{6}H_{6}$, $PM_{1}$, $SO_{2}$.
    \item Unitats de mesura: $\mu g/m^{3}$.
\end{itemize}
Com es pot observar en les mètriques del \textit{dataset} que s'utilitzarà en la segona part de la pràctica, aquest consta de 1.402.163 de files i 40 columnes (les del \textit{dataset} original) que combinen variables numèriques, de tipus punt, textuals i de tipus segell de temps flotant. \newline
Amb les mètriques del \textit{dataset} netejat i filtrat es considera que el conjunt de dades té una mida i una varietat suficients per a la segona part de la pràctica.
\section*{Originalitat}
\addcontentsline{toc}{section}{Originalitat}
El \textit{dataset} proposat respon al segon escenari proposat de l'enunciat: "Millorar el conjunt de dades". Aquestes millores es poden resumir en 3 grans tasques: Filtratge, tractament de \textit{nulls} i unificació d'unitats de mesura dels contaminants.\newline
En la tasca de filtratge, en primer lloc, s'ha utilitzat la funció \textit{to\_datetime()} en la columna de dates per transformar el tipus de la columna a \textit{datetime} i posteriorment s'han filtrat les dades eliminant totes aquelles dades anteriors a l'1 de gener de 2015. \newline
La tasca de tractament de valors \textit{nulls}, ha consistit en tres subtasques la primera de les quals ha estat imputar un valor de 0 a totes aquelles lectures (columnes que indiquen la lectura en una hora del dia. Hi ha una columna per hora) que no tenien cap valor imputat en el conjunt original. En segon lloc, s'han comprovat les columnes 'DATA', 'CONTAMINANT', 'UNITATS', 'TIPUS ESTACIO", 'AREA URBANA', 'ALTITUD', 'LONGITUD' i 'LATITUD' (són les que, juntament amb les lectures de cada hora, ajudaran a respondre les preguntes plantejades) en recerca de valors \textit{null}. En aquest cas, si s'ha trobat algun valor \textit{null}, s'han eliminat els registres. S'ha optat per aquesta opció per tal d'evitar una imputació aleatòria i evitar així possibles biaixos en les posteriors anàlisis de les dades mitjançant visualitzacions.\newline
Finalment, la tercera subtasca ha consistit a excloure del conjunt de dades aquells registres en els quals totes les lectures dels contaminants són 0, ja que no aporten cap mena d'informació rellevant. \newline
L'última millora que s'ha dut a terme en el conjunt de dades ha estat l'harmonització d'unitats de mesura dels contaminants. Totes les lectures expressades en $mg/m^{3}$ i $ng/m^{3}$ han estat convertides a $\mu g/m^{3}$. La conversió a $\mu g/m^{3}$ es justifica pel fet que la Comissió Europea utilitza aquesta mesura com a mesura estàndard els micrograms per metre cúbic.\hyperref[ref:ec_aqs]{[Ref.4]}. Cal posar èmfasi en que a partir del 2015 les partícules $PM_{x}$ es troben expressades en $\mu g/m^{3}$ en el conjunt de dades original i no en $ppm$. \newline
Finalment, també s'han modificat els símbols de les unitats a $\mu g/m^{3}$, s'han establert les àrees \textit{peri-urban} com \textit{suburban} (en el conjunt de dades original hi ha ambdues etiquetes), ja que segons la informació del \textit{dataset} en el web de la Generalitat de Catalunya són el mateix.\newline
Aquestes accions aplicades sobre el conjunt de dades constitueixen una clara millora d'aquest i permetran, en la segona part de la pràctica, una anàlisi de les dades que amb el conjunt original no haurià estat possible degut a biaixos en els resultats per culpa de diferents unitats de mesura i valors \textit{nulls}.\newline
El codi emprat per a realitzar totes les modificacions fetes al \textit{dataset}, es poden veure al repositori GitHub: \href{https://github.com/marc7666/PRAC-VD}{\underline{Repositori de la pràctica}}.\newline
\section*{Qüestions a respondre amb la visualització de dades}
\addcontentsline{toc}{section}{Qüestions a respondre amb la visualització de dades}
Després de l'observació de les dades disponibles, s'han plantejat les següents preguntes:
\begin{itemize}
    \item Quines comarques tenen els majors nivells de cada contaminant?
    \item Hi ha diferències entre tipus d'estacions?
    \item Quines són les hores amb més contaminació? El contaminant és un gas o partícules en suspensió?
    \item Hi ha alguna relació entre la contaminació i l'altura a la qual es troba l'estació?
    \item Quin és el contaminant que més varia els seus nivells al llarg del dia?
\end{itemize}
Les preguntes plantejades són adequades perquè requereixen que el \textit{dataset}, no contingui valors \textit{nulls}, i totes les lectures dels contaminants estiguin en una sola unitat de mesura. Concretament, totes les lectures es troben mesurades en $\mu g/m^{3}$. D'aquesta manera, es poden comparar estacions, tipus d'estacions, comarques, àrees, diferents hores del dia i diferents contaminants.\newline
El conjunt de dades original (l'extret del web de la Generalitat) s'empra en una visualització de tipus \textit{Pin Map} on cada pin està colorat segons la qualitat de l'aire i si es fa clic sobre algun d'aquests 'pins', es podran observar tant les dades de les lectures de l'estació com la fitxa tècnica de l'estació. Aquesta visualització es pot visitar en el lloc web indicat en \hyperref[ref:vis-map-cat-aire]{[Ref.5]} \newline
Diccionari de variables:\newline
\begin{longtable}{|c|>{\centering\arraybackslash}p{6cm}|>{\centering\arraybackslash}p{2cm}|}
                \hline Variable & Descripció & Dimensió o Fet d'estudi?\\
                \hline
                 CODI EOI & Codi assignat pel Ministeri responsable de qualitat de l'aire & No s'utilitzarà en l'anàlisi \\
                 \hline
                 NOM ESTACIO & Nom de la cabina & Dimensió \\
                 \hline
                 DATA & Data de la mesura & Dimensió \\
                 \hline
                 MAGNITUD & Codi numèric que identifica el contaminant & Dimensió\\
                 \hline
                 CONTAMINANT & Fórmula del contaminant & Dimensió\\
                 \hline
                 UNITATS & Unitats de mesura & Dimensió\\
                 \hline
                 TIPUS ESTACIO & Traffic, Background i Industrial & Dimensió\\
                 \hline
                 AREA URBANA & Urban, Peri-Urban o suburban i Rural & Dimensió\\
                 \hline
                 CODI INE & Codi de 5 dígits del municipi & No s'utilitzarà en l'anàlisi\\
                 \hline
                 MUNICIPI & Nom del municpi on es troba la cabina & Dimensió\\
                 \hline
                 CODI COMARCA & Codi per identificar la comarca on es troba la cabina & No s'utilitzarà en l'anàlisi\\
                 \hline
                 NOM COMARCA & Nom de la comarca on es troba la cabina & Dimensió\\
                 \hline
                 01h & Lectura per a l'hora 01 & Fet d'estudi\\
                 \hline
                 02h & Lectura per a l'hora 02 & Fet d'estudi\\
                 \hline
                 03h & Lectura per a l'hora 03 & Fet d'estudi\\
                 \hline
                 04h & Lectura per a l'hora 04 & Fet d'estudi\\
                 \hline
                 05h & Lectura per a l'hora 05 & Fet d'estudi\\
                 \hline
                 06h & Lectura per a l'hora 06 & Fet d'estudi\\
                 \hline
                 07h & Lectura per a l'hora 07 & Fet d'estudi\\
                 \hline
                 08h & Lectura per a l'hora 08 & Fet d'estudi\\
                 \hline
                 09h & Lectura per a l'hora 09 & Fet d'estudi\\
                 \hline
                 10h & Lectura per a l'hora 10 & Fet d'estudi\\
                 \hline
                 11h & Lectura per a l'hora 11 & Fet d'estudi\\
                 \hline
                 12h & Lectura per a l'hora 12 & Fet d'estudi\\
                 \hline
                 13h & Lectura per a l'hora 13 & Fet d'estudi\\
                 \hline
                 14h & Lectura per a l'hora 14 & Fet d'estudi\\
                 \hline
                 15h & Lectura per a l'hora 15 & Fet d'estudi\\
                 \hline
                 16h & Lectura per a l'hora 16 & Fet d'estudi\\
                 \hline
                 17h & Lectura per a l'hora 17 & Fet d'estudi\\
                 \hline
                 18h & Lectura per a l'hora 18 & Fet d'estudi\\
                 \hline
                 19h & Lectura per a l'hora 19 & Fet d'estudi\\
                 \hline
                 20h & Lectura per a l'hora 20 & Fet d'estudi\\
                 \hline
                 21h & Lectura per a l'hora 21 & Fet d'estudi\\
                 \hline
                 22h & Lectura per a l'hora 22 & Fet d'estudi\\
                 \hline
                 23h & Lectura per a l'hora 23 & Fet d'estudi\\
                 \hline
                 24h & Lectura per a l'hora 24 & Fet d'estudi\\
                 \hline
                 ALTITUD & Altitud de l'estació & Dimensió \\
                 \hline
                 LATITUD & Latitud expressada en graus decimals. Sistema de referència WGS84 & Dimensió\\
                 \hline
                 LONGITUD & Longitud expressada en graus decimals. Sistema de referència WGS84 & Dimensió\\
                 \hline
                 Georeferència & Georeferència & No s'utilitzarà en l'anàlisi\\
                 \hline
            \caption{Variables del dataset i els seus tipus}
            \label{tab:variables}
            \end{longtable}


\section*{Bibliografia}
\addcontentsline{toc}{section}{Bibliografia}
[Ref.1] \label{ref:dades_gob_esp} \textit{Calidad del aire en los puntos de medida automáticos de la Red de Vigilancia y Previsión de la Contaminació Atmosférica} [en línia] [consulta: 17 de novembre de 2025] Disponible a: \sloppy\href{https://datos.gob.es/es/catalogo/a09002970-calidad-del-aire-en-los-puntos-de-medida-automaticos-de-la-red-de-vigilancia-y-prevision-de-la-contaminacio-atmosferica}{https://datos.gob.es/es/catalogo/a09002970-calidad-del-aire-en-los-puntos-de-medida-automaticos-de-la-red-de-vigilancia-y-prevision-de-la-contaminacio-atmosferica} \textbf{$\rightarrow$ Repositòri de dades del gobern d'Espanya.} \newline
[Ref.2] \label{ref:dades_cat} Generalitat de Catalunya. Departament de Territori, Habitatge i Transició Ecològica. Xarxa de Vigilància i Previsió de ka Contaminació Atmosfèrica. [organisme autònom, empresa pública]. \textit{Qualitat de l'aire als punts de mesurament automàtics de la Xarxa de Vigilància i Previsió de la Contaminació Atmosfèrica} [base de dades en línia]. Darrera actualització: [17 de novbembre de 2025]. Llicència Oberta d'Ús d'Informació - Catalunya [consulta: 17 de novembre de 2025]. Disponible a: \href{https://analisi.transparenciacatalunya.cat/Medi-Ambient/Qualitat-de-l-aire-als-punts-de-mesurament-autom-t/tasf-thgu/about_data}{https://analisi.transparenciacatalunya.cat/Medi-Ambient/Qualitat-de-l-aire-als-punts-de-mesurament-autom-t/tasf-thgu/about\_data} \textbf{$\rightarrow$ Web de dades obertes de la Generalitat de Catalunya. Enllaç al \textit{dataset}.\\
IMPORTANT: La llicència de la Generalitat especifíca una citació específica de les dades sota la llicència } \newline
[Ref.3] \textit{Sofcatalà} [en línia] [consulta: 20 de novembre de 2025] Disponible a: \href{https://www.softcatala.org/corrector/}{https://www.softcatala.org/corrector/} \newline
[Ref.4] \label{ref:ec_aqs} \textit{EU air quality standards} [en línia] [consulta: 25 de novembre de 2025] Disponible a: \href{https://environment.ec.europa.eu/topics/air/air-quality/eu-air-quality-standards_en}{https://environment.ec.europa.eu/topics/air/air-quality/eu-air-quality-standards\_en} \textbf{$\rightarrow$ Web de la Comissió Europea que explica els estàndards de mesura de la qualitat de l'aire.} \newline
[Ref.5] \label{ref:vis-map-cat-aire} \textit{Vols saber què respires?} [en línia] [consulta: 25 de novembre de 2025] Disponible a: \href{https://mediambient.gencat.cat/ca/05_ambits_dactuacio/atmosfera/qualitat_de_laire/vols-saber-que-respires/}{https://mediambient.gencat.cat/ca/05\_ambits\_dactuacio/atmosfera/qualitat\_de\_laire/vols-saber-que-respires/} \textbf{$\rightarrow$ Web on es pot veure una visualització creada amb les dades escollides per la pràctica.}
\section*{Bibliografia del codi emprat per treballar amb les dades}
\addcontentsline{toc}{section}{Bibliografia del codi emprat per treballar amb les dades}
[Ref.Codi.1] \textit{pandas.Series.unique} [en línia] [consulta: 20 de novembre de 2025] Disponible a: \href{https://pandas.pydata.org/docs/reference/api/pandas.Series.unique.html}{https://pandas.pydata.org/docs/reference/api/pandas.Series.unique.html} \textbf{$\rightarrow$ Documentació de la funció per a seleccionar els elements únics d'una sèrie pandas.} \newline
[Ref.Codi.2] \textit{pandas.Series.to\_list} [en línia] [consulta: 20 de novembre de 2025] Disponible a: \href{https://pandas.pydata.org/docs/reference/api/pandas.Series.to_list.html}{https://pandas.pydata.org/docs/reference/api/pandas.Series.to\_list.html} \textbf{$\rightarrow$ Documentació de la funció per a retornar valors en format llista.} \newline
[Ref.Codi.3] \textit{Cómo obtener el recuento de filas de un Pandas DataFrame} [en línia] [consulta: 20 de novembre de 2025] Disponible a: \href{https://www.delftstack.com/es/howto/python-pandas/how-to-get-the-row-count-of-a-pandas-dataframe/}{https://www.delftstack.com/es/howto/python-pandas/how-to-get-the-row-count-of-a-pandas-dataframe/} \textbf{$\rightarrow$ Web que explica com obtenir el total de files i el total de columnes d'un dataframe de pandas.} \newline
[Ref.Codi.4] \textit{pandas.to\_datetime} [en línia] [consulta: 20 de novembre de 2025] Disponible a: \href{https://pandas.pydata.org/docs/reference/api/pandas.to_datetime.html}{https://pandas.pydata.org/docs/reference/api/pandas.to\_datetime.html} \textbf{$\rightarrow$ Documentació de la funció per a convertir un argument a format \textit{datetime}.} \newline
[Ref.Codi.5] \textit{pandas.DataFrame.copy} [en línia] [consulta: 22 de novembre de 2025] Disponible a: \href{https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.copy.html}{https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.copy.html} \textbf{$\rightarrow$ Documentació oficial de la funció per a realitzar runa còpia d'un \textit{dataframe}.} \newline
[Ref.Codi.6] \textit{pandas.DataFrame.fillna} [en línia] [consulta: 22 de novembre de 2025] Disponible a: \href{https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.fillna.html}{https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.fillna.html} \textbf{$\rightarrow$ Documentació oficial de la funció per a imputar un valor en valors nuls.} \newline
[Ref.Codi.7] \textit{pandas.DataFrame.dropna} [en línia] [consulta: 22 de novembre de 2025] Disponible a: \href{https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.dropna.html}{https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.dropna.html} \textbf{$\rightarrow$ Documentació oficial de la funció per a eliminar valors nuls.} \newline
[Ref.Codi.8] \textit{pandas.DataFrame.all} [en línia] [consulta: 22 de novembre de 2025] Disponible a: \href{https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.all.html}{https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.all.html} \textbf{$\rightarrow$ Documentació oficial de la funció per a saber si tots els elements d'un eix del dataframe cumpleixen una o més condicions.} \newline
[Ref.Codi.9] \textit{Como poner la virgulilla en el teclado (Windows, Mac, Linux, etc)} [en línia] [consulta: 22 de novembre de 2025] Disponible a: \href{https://www.computermaniaco.com/como-poner-la-virgulilla-en-el-teclado-windows-mac-linux-etc/}{https://www.computermaniaco.com/como-poner-la-virgulilla-en-el-teclado-windows-mac-linux-etc/} \textbf{$\rightarrow$ Web que explica com escriure la \textit{virgulilla}.} \newline
[Ref.Codi.10] \textit{Write \textbackslash{}mu (Greek letter, Symbol) in Python Matplotlib.pyplot} [en línia] [consulta: 22 de novembre de 2025] Disponible a: \href{https://pythonmatplotlibtips.blogspot.com/2017/11/write-mu-greek-letter-symbol-in-python.html}{https://pythonmatplotlibtips.blogspot.com/2017/11/write-mu-greek-letter-symbol-in-python.html} \textbf{$\rightarrow$ Web que explica com excriure la lletra grega \textbackslash{}mu.} \newline
[Ref.Codi.11] \textit{Python String replace() Method} [en línia] [consulta: 22 de novembre de 2025] Disponible a: \href{https://www.w3schools.com/python/ref_string_replace.asp}{https://www.w3schools.com/python/ref\_string\_replace.asp} \textbf{$\rightarrow$ Web que explica el funcionament de la funció \textit{replace()}.} \newline
[Ref.Codi.12] \textit{pandas.DataFrame.loc} [en línia] [consulta: 23 de novembre de 2025] Disponible a: \href{https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.loc.html}{https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.loc.html} \textbf{$\rightarrow$ Documentació de la funció per a accedir a un grup de columnes.} \newline
[Ref.Codi.13] \textit{pandas.DataFrame.to\_csv} [en línia] [consulta: 23 de novembre de 2025] Disponible a: \href{https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_csv.html}{https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to\_csv.html} \textbf{$\rightarrow$ Documentació de la funció per a exportar un \textit{dataframe} a csv.}
\end{document}
